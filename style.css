:root{
  /* רקע צבעוני זורם */
  --bgA:#ffd1ff; --bgB:#b5f8ff; --bgC:#ffe29a;

  /* לוח צבעים */
  --pane:rgba(255,255,255,.75);
  --stroke:rgba(255,255,255,.6);
  --txt:#122; --muted:#335;
  --op:#ffe07a; --danger:#ff5678;
  --equal1:#7b2ff7; --equal2:#00c6ff;

  --radius:20px; --shadow:0 28px 60px rgba(0,0,0,.25);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}

/* ממרכז הכל אופקית ואנכית */
body{
  background:
    radial-gradient(1200px 600px at 10% 10%, var(--bgA), transparent 60%),
    radial-gradient(1000px 700px at 90% 80%, var(--bgB), transparent 60%),
    radial-gradient(900px 500px at 50% 50%, var(--bgC), transparent 60%),
    linear-gradient(135deg, #fff, #e7faff 60%);
  animation: floatBg 15s ease-in-out infinite alternate;

  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--txt);

  /* מרכז אנכית ואופקית */
  display:grid;
  place-items:center;
  min-height:100vh;
  padding:24px;
}
@keyframes floatBg{
  from{ background-position: 0 0, 100% 100%, 50% 50%, 0 0; }
  to{   background-position: 10% 5%, 95% 70%, 55% 45%, 0 0; }
}

/* סטאק ממורכז */
.page-center{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  width: min(560px, 96vw);
}

/* כותרת */
.brand{
  text-align:center;
  font-family: 'Poppins', Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: clamp(1.9rem, 6vw, 2.6rem);
  font-weight: 700;
  letter-spacing: .6px;
  background: linear-gradient(90deg, #7b2ff7, #00c6ff, #00e7a7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 4px 12px rgba(0,0,0,.1), 0 0 20px rgba(255,255,255,.4);
  margin: 0;
}

/* מחשבון */
.calculator-wrap{ width:100% }
.calculator{
  backdrop-filter: blur(16px) saturate(140%);
  background: var(--pane);
  border:1px solid var(--stroke);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: clamp(14px, 3vw, 18px);
  width: 100%;
}

.screen{
  background: rgba(255,255,255,.85);
  border:1px solid var(--stroke);
  border-radius:16px;
  padding:12px 14px;
  margin-bottom:14px;
}
.history{
  color: var(--muted);
  font-size:.9rem;
  min-height:1.2em;
  direction:ltr;
}
.display{
  font-size: clamp(1.6rem, 6vw, 2.6rem);
  line-height:1.2;
  letter-spacing:.4px;
  direction:ltr;
  text-align:right;
  white-space:nowrap;
  overflow:hidden;
}

.keys{
  display:grid;
  gap: clamp(8px, 2.2vw, 12px);
  grid-template-columns: repeat(4, 1fr);
}
button{
  border:none;
  border-radius:14px;
  padding: clamp(10px, 2.8vw, 14px) 0;
  font-size: clamp(1rem, 3.8vw, 1.2rem);
  min-height: clamp(40px, 10vw, 54px);
  color:var(--txt);
  background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.8));
  border:1px solid rgba(0,0,0,.06);
  box-shadow: 0 6px 14px rgba(0,0,0,.12);
  cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
button:hover{ transform: translateY(-2px); filter:brightness(1.03) }
button:active{ transform: translateY(0) scale(.98) }

[data-type="op"]{
  background: linear-gradient(180deg, #fff4b3, #ffe680);
  color:#5a4300;
}
.equal{
  grid-column: span 2;
  color:#fff;
  background: linear-gradient(135deg, var(--equal1), var(--equal2));
  box-shadow: 0 10px 26px rgba(122,140,255,.45), 0 0 18px rgba(98,255,211,.55);
}
.danger{
  background: linear-gradient(180deg, #ff9bb0, #ff6786);
  color:#fff;
}
.zero{ grid-column: span 1 }

/* כפתור Instructions */
.instructions-btn{
  margin-top: 12px;
  width: 100%;
  border: none;
  border-radius: 14px;
  padding: 12px 0;
  font-size: 1.05rem;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, #6f7bfd, #49e6c6);
  box-shadow: 0 10px 22px rgba(111,123,253,.35), 0 0 14px rgba(73,230,198,.35);
  cursor: pointer;
}

/* ===== Modal ===== */
.modal[hidden]{ display:none }
.modal{
  position: fixed;
  inset: 0;
  z-index: 80;
}
.modal-backdrop{
  position:absolute; inset:0;
  backdrop-filter: blur(6px);
  background: rgba(0,0,0,.18);
}
.modal-card{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%) scale(.98);
  width: min(520px, 92vw);
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 30px 80px rgba(0,0,0,.35);
  overflow: hidden;
  opacity: 0;
  transition: transform .15s ease, opacity .15s ease;
}
.modal.show .modal-card{ transform: translate(-50%, -50%) scale(1); opacity: 1; }

.modal-header{
  display:flex; align-items:center; justify-content:space-between;
  padding: 14px 16px;
  background: linear-gradient(90deg, #7b2ff7, #00c6ff);
  color:#fff;
}
.modal-header h2{ margin:0; font-size:1.1rem; font-weight:700 }
.modal-close{
  border:none; background:transparent; color:#fff;
  font-size:1.4rem; line-height:1; cursor:pointer;
}

.modal-body{ padding: 16px }
.modal-list{ margin:0 0 10px 0; padding-left: 18px }
.modal-list li{ margin: 6px 0; font-weight:600; color:#233 }
.modal-body kbd{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: .95em; padding: 1px 6px; border-radius: 6px;
  border: 1px solid rgba(0,0,0,.08); background: #f7f7f9;
}
.modal-note{ margin: 8px 0 0 0; color:#445; font-weight:600 }

.modal-footer{
  padding: 12px 16px;
  background:#f7f7fa;
  display:flex; justify-content:flex-end;
}
.modal-action{
  border:none; border-radius:10px; padding:10px 14px; font-weight:700;
  background:#2c7be5; color:#fff; cursor:pointer;
}

/* למנוע גלילה מאחורי המודל */
body.modal-open{ overflow:hidden }

/* רספונסיביות קלה */
@media (max-width: 420px){
  .display{ font-size: clamp(1.4rem, 7vw, 2.2rem) }
  .instructions-btn{ font-size: 1rem }
}
.footer-note{
  margin-top: 8px;
  font-size: 0.85rem;
  color: #333;
  opacity: 0.75;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  text-align: center;
}
